<!-- In order to pass on page parameters from within loops -->
{{- $page := .Page -}}
<!-- bn = block name -->
{{- $bn := "toc" -}}
<!-- classes to add to outer element -->
{{- $classes := $bn -}}

<!-- The TOC HTML, which should comprise a <nav> containing a <ul> or <ol> -->
<!-- Each <li> within the list should link to the ID using an anchor tag. -->
<!-- EG <li><a href="#here">Item name</a></li> -->
<!-- This structure is the same as the one created by Hugo -->
{{- $tocHTML := .Block.toc_html | default "" -}}

<!-- The content block dict, must include a .template variable -->
{{- $content := .Block.content | default "" -}}

<!-- The title provided to the block -->
<!-- {{- $title := .Block.title | default "" -}} -->

<div class="{{- $classes -}}">

  <aside class="{{- $bn -}}__toc-container">

    <div class="{{- $bn -}}__toc">

      {{- if $tocHTML -}}

        {{- $tocHTML | safeHTML -}}

        <button class="{{ $bn }}__button" id="toc-toggle" aria-label="Show table of contents" aria-expanded="true" aria-controls="member-nodes-toc">
          <span class="{{ $bn }}__button-icon">
            <svg viewBox="0 0 24 24" stroke="currentColor" fill="none">
              <line x1="8" y1="6" x2="21" y2="6"></line>
              <line x1="8" y1="12" x2="21" y2="12"></line>
              <line x1="8" y1="18" x2="21" y2="18"></line>
              <line x1="3" y1="6" x2="3.01" y2="6"></line>
              <line x1="3" y1="12" x2="3.01" y2="12"></line>
              <line x1="3" y1="18" x2="3.01" y2="18"></line>
            </svg>
          </span>
        </button>

      {{- end -}}

    </div>
  </aside>

  {{- with $content -}}
    <div class="{{- $bn -}}__content">

      {{- . | safeHTML -}}

    </div>
  {{- end -}}

</div>